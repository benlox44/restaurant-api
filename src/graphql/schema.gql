type User {
  id: Int!
  name: String!
  email: String!
  isLocked: Boolean!
  isEmailConfirmed: Boolean!
  createdAt: String!
  oldEmail: String
  newEmail: String
  emailChangedAt: String
}

type AuthResponse {
  accessToken: String!
}

type MessageResponse {
  message: String!
}

type RevertEmailResponse {
  resetToken: String!
}

# ===== Menu Types =====
type MenuItem {
  id: String!
  name: String!
  description: String!
  price: Float!
  category: String!
}

type CreateMenuResponse {
  id: String!
  item: MenuItem!
}

# ===== Order Types =====
type OrderItem {
  menuItemId: String!
  name: String!
  quantity: Int!
  price: Float!
}

type Order {
  id: String!
  items: [OrderItem!]!
  total: Float!
  status: String!
  createdAt: Int!
}

type CreateOrderResponse {
  id: String!
  order: Order!
}

type OperationResponse {
  ok: Boolean!
}

# ===== Input Types =====
input CreateOrderItemInput {
  menuItemId: String!
  name: String!
  quantity: Int!
  price: Float!
}

type Query {
  # Get current user profile
  myProfile: User!
  
  # Menu queries
  menu: [MenuItem!]!
  
  # Order queries
  orders: [Order!]!
}

type Mutation {
  # Authentication
  register(email: String!, password: String!, name: String!): MessageResponse!
  login(email: String!, password: String!): AuthResponse!
  
  # Password management
  requestPasswordReset(email: String!): MessageResponse!
  resetPassword(token: String!, newPassword: String!): MessageResponse!
  resetPasswordAfterRevert(token: String!, newPassword: String!): MessageResponse!
  updatePassword(currentPassword: String!, newPassword: String!): MessageResponse!
  
  # Account management
  requestUnlock(email: String!): MessageResponse!
  confirmEmail(token: String!): MessageResponse!
  confirmEmailUpdate(token: String!): MessageResponse!
  revertEmail(token: String!): RevertEmailResponse!
  unlockAccount(token: String!): MessageResponse!
  
  # Profile management
  updateProfile(name: String!): MessageResponse!
  requestEmailUpdate(password: String!, newEmail: String!): MessageResponse!
  deleteAccount(password: String!): MessageResponse!
  
  # Menu mutations
  createMenuItem(name: String!, description: String!, price: Float!, category: String!): CreateMenuResponse!
  updateMenuItem(id: String!, name: String, description: String, price: Float, category: String): OperationResponse!
  deleteMenuItem(id: String!): OperationResponse!
  
  # Order mutations
  createOrder(items: [CreateOrderItemInput!]!): CreateOrderResponse!
  updateOrderStatus(id: String!, status: String!): OperationResponse!
  deleteOrder(id: String!): OperationResponse!
}
